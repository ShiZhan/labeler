# pipe management

PIPE_DIR="/tmp/pipes"

make_pipes() {
  if [[ ! -d $PIPE_DIR ]]; then
    mkdir $PIPE_DIR
    for p in `seq 0 9`; do
      [[ ! -p $PIPE_DIR/$p.fifo ]] && mkfifo $PIPE_DIR/$p.fifo
    done
  fi
  cmd=""
  for p in `seq 0 9`; do
    cmd="export P$p=$PIPE_DIR/$p.fifo; $cmd"
  done
  eval $cmd
}

clean_pipes() {
  if [[ -d $PIPE_DIR ]]; then
    rm -Rf $PIPE_DIR
  fi
}
